import{d as oe,r as u,o as B,a as _,c as k,b as a,e as w,t as i,f as le,w as d,g as r,h as ie,i as U,j as ue,v as re,k as ce,n as de,F as x,l as L,m as me,p as F}from"./index-bJM7hYyA.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as fe,V as pe,a as M,b as ve,c as E}from"./VTabs-BzcdmhtN.js";import{V as he,a as ge,b as _e}from"./VDialog-DSx95c_l.js";import{V as ke,a as we,b as z}from"./scopeId-B7NfM7Mo.js";const ye=oe("pokemon",{state:()=>({pokemons:[],loadedPokemonNames:new Set}),actions:{modalAddPokemons(b){b.forEach(c=>{this.loadedPokemonNames.has(c.name)||(this.pokemons.push(c),this.loadedPokemonNames.add(c.name))})}}}),be={id:"highlightWord"},D="하찮은",Ve={__name:"main_highlight_word",setup(b){const c=u(""),f=u(0),l=u(!1),p=()=>{!l.value&&f.value<D.length?(c.value+=D.charAt(f.value),f.value++,setTimeout(p,200)):l.value&&f.value>0?(c.value=D.substring(0,f.value-1),f.value--,setTimeout(p,100)):f.value===D.length?setTimeout(()=>{l.value=!0,setTimeout(p,200)},1e3):f.value===0&&(l.value=!1,setTimeout(p,500))};return B(()=>{p()}),(h,m)=>(_(),k("div",null,[a("h2",null,[w(" 우리만의 "),a("span",be,i(c.value),1),w(" 포켓몬 도감 ")])]))}},Pe=K(Ve,[["__scopeId","data-v-b527adcb"]]),Ce=["src"],Te={__name:"PokemonDetailModal",props:{id:{type:Number,required:!0}},setup(b){const c=b,f=ye(),l=u({}),p=u("one");return B(()=>{const h=fe.find(o=>o.id===c.id),m=f.pokemons.find(o=>o.id===c.id);l.value={...h,...m}}),(h,m)=>(_(),le(ge,null,{default:d(()=>[r(he,null,{default:d(()=>[w(" 포켓몬 상세 정보 "),r(ke,{icon:"",variant:"text",onClick:m[0]||(m[0]=o=>h.$emit("close"))},{default:d(()=>[r(we,null,{default:d(()=>[w("mdi-close")]),_:1})]),_:1})]),_:1}),r(z,null,{default:d(()=>[a("img",{src:l.value.sprite,alt:"Pokemon Image",class:"pokemon-image"},null,8,Ce),r(pe,{modelValue:p.value,"onUpdate:modelValue":m[1]||(m[1]=o=>p.value=o),class:"tabs"},{default:d(()=>[r(M,{value:"one"},{default:d(()=>[w("한국어")]),_:1}),r(M,{value:"two"},{default:d(()=>[w("English")]),_:1}),r(M,{value:"three"},{default:d(()=>[w("日本語")]),_:1})]),_:1},8,["modelValue"]),r(z,null,{default:d(()=>[r(ve,{modelValue:p.value,"onUpdate:modelValue":m[2]||(m[2]=o=>p.value=o)},{default:d(()=>[r(E,{value:"one"},{default:d(()=>{var o,v;return[a("p",null,"포켓몬 이름: "+i((o=l.value.names)==null?void 0:o.korean),1),a("p",null,i((v=l.value.descriptions)==null?void 0:v.korean),1),a("p",null,"키: "+i(l.value.height/10)+" m",1),a("p",null,"몸무게: "+i(l.value.weight/10)+" kg",1)]}),_:1}),r(E,{value:"two"},{default:d(()=>{var o,v;return[a("p",null,"Pokemon Name: "+i((o=l.value.names)==null?void 0:o.english),1),a("p",null,i((v=l.value.descriptions)==null?void 0:v.english),1),a("p",null,"Height: "+i(l.value.height/10)+" m",1),a("p",null,"Weight: "+i(l.value.weight/10)+" kg",1)]}),_:1}),r(E,{value:"three"},{default:d(()=>{var o,v;return[a("p",null,"ポケモンの名前: "+i((o=l.value.names)==null?void 0:o.japanese),1),a("p",null,i((v=l.value.descriptions)==null?void 0:v.japanese),1),a("p",null,"高さ: "+i(l.value.height/10)+" m",1),a("p",null,"重さ: "+i(l.value.weight/10)+" kg",1)]}),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}},je=K(Te,[["__scopeId","data-v-35f57794"]]),De={key:0,class:"loading-screen"},Se=a("iframe",{src:"https://lottie.host/embed/d9047134-fec7-4dec-bba1-a5daccfa345f/Nxtp4KlqIX.json"},null,-1),$e=[Se],Ne={class:"searchBar"},xe={class:"type"},Le=a("p",{class:"typeTitle"},"속성으로 찾아보기",-1),Me={class:"typeGroup"},Ee=["onClick"],Be=a("div",{class:"sort"},"번호순 (오름차순)",-1),Ie={id:"searchResultCount"},Oe={class:"cardSec"},We=["onClick"],qe=["src","alt"],Ae={class:"langEnJp"},Re={class:"typeWrap"},Ue={key:0,class:"endOfListMessage"},H=16,Ge={__name:"index",setup(b){const c=u(!1),f=u(null),l=t=>{f.value=t,c.value=!0},p=()=>{c.value=!1},h=u(""),m=u(""),o=u([]);let v=0;const I=new Set,y=u(!1),P=u("");u("");const C=u(!0),T=u(!1),S=u(!1),j=u(!1),$=u(!1);let O=u([]);async function Y(t){const e=await(await fetch(`https://pokeapi.co/api/v2/pokemon/${t}`)).json();return{id:e.id,sprite:e.sprites.front_default||e.sprites.other["official-artwork"].front_default||"@/assets/img/silhouette.png",types:e.types.map(s=>s.type.name),height:e.height,weight:e.weight}}ie(y,t=>{const n=document.documentElement;t?n.style.overflowY="hidden":n.style.overflowY="auto"});const W={normal:"노말",fire:"불꽃",water:"물",electric:"전기",grass:"풀",ice:"얼음",fighting:"격투",poison:"독",ground:"땅",flying:"비행",psychic:"에스퍼",bug:"벌레",rock:"바위",ghost:"고스트",dragon:"드래곤",dark:"악",steel:"강철",fairy:"페어리"};async function G(t,n,e=""){if(e)return(await(await fetch(`https://pokeapi.co/api/v2/type/${e}`)).json()).pokemon.map(ne=>ne.pokemon).slice(t,t+n);{const s=`https://pokeapi.co/api/v2/pokemon?offset=${t}&limit=${n}`;return(await(await fetch(s)).json()).results}}async function J(t){return await(await fetch(t.url)).json()}async function Q(t){const e=await(await fetch(t.species.url)).json();return{korean:e.names.find(s=>s.language.name==="ko").name,english:e.names.find(s=>s.language.name==="en").name,japanese:e.names.find(s=>s.language.name==="ja").name}}async function N(){if(y.value||!C.value)return;T.value=!0,y.value=!0,document.body.style.overflow="hidden";const t=await G(v,H,P.value);if(t.length===0){C.value=!1,Z(),y.value=!1,T.value=!1,document.body.style.overflow="auto";return}for(let n of t)if(!I.has(n.name))try{const e=await J(n),s=await Q(e);let g=e.sprites.front_default;g||(g=e.sprites.other["official-artwork"].front_default),g||(g="@/assets/img/silhouette.png"),o.value.push({id:e.id,name:n.name,names:s,sprite:g,types:e.types.map(V=>V.type.name)}),document.body.classList.contains("darkMode")&&me(()=>{document.querySelectorAll(".cardOne").forEach(V=>{V.classList.add("is-dark")})})}catch(e){console.error(`Error fetching data for ${n.name}:`,e)}v+=H,y.value=!1,T.value=!1,document.body.style.overflow="auto"}async function q(){$.value=!0;const t=h.value.trim().toLowerCase();if(P.value="",!t){j.value=!1;return}const n=O.value.filter(s=>s.names.korean.includes(t)||s.names.english.toLowerCase().includes(t)||s.names.japanese.includes(t));if(n.length===0){m.value="일치하는 포켓몬이 없습니다.",o.value=[];return}const e=n.map(async s=>({...await Y(s.id),names:s.names,descriptions:s.descriptions}));o.value=await Promise.all(e),m.value=`총 ${n.length}마리의 포켓몬이 소환되었습니다.`}async function X(t){$.value=!1,h.value="",v=0,I.clear(),o.value=[],P.value=t,console.log("currentFilter:",P.value),A(),ee(),C.value=!0,await N()}function Z(){A(),S.value=!0}function A(){S.value=!1}function ee(){m.value=""}function R(){if($.value)return;window.innerHeight+window.scrollY>=document.documentElement.offsetHeight-200&&!y.value&&C.value&&N()}async function ae(){const n=await(await fetch("/src/assets/poke_details_data.json")).json();O.value=n}function te(){const t=h.value.trim();if(!t){j.value=!1;return}const n=se(t);console.log(`Detected language: ${n}`),j.value=n==="unknown"||n==="number"}function se(t){const n=/[\u3131-\uD79D]/giu,e=/[\u3040-\u30ff\u31f0-\u31ff\ufb00-\uff9f]/giu,s=/^[A-Za-z]+$/;return/\d/.test(t)?"number":n.test(t)?"korean":e.test(t)?"japanese":s.test(t)?"english":"unknown"}return B(()=>{ae(),N(),window.addEventListener("scroll",R)}),(t,n)=>(_(),k("div",null,[T.value?(_(),k("div",De,$e)):U("",!0),a("div",{class:"mainSec",onScroll:R},[a("div",null,[r(Pe),a("div",Ne,[ue(a("input",{type:"text",placeholder:"포켓몬을 검색해보세요!",id:"search","onUpdate:modelValue":n[0]||(n[0]=e=>h.value=e),onKeyup:ce(q,["enter"]),onInput:te},null,544),[[re,h.value]]),a("span",{class:"tooltip",style:de({display:j.value?"block":"none"})},"검색 가능한 언어: 한국어, 영어, 일본어",4),a("button",{id:"searchBt",onClick:q},"검색")])]),a("div",null,[a("div",xe,[Le,a("div",Me,[(_(),k(x,null,L(W,(e,s)=>a("p",{key:s,class:F(["nes-btn",s]),onClick:g=>X(s)},i(e),11,Ee)),64))])]),Be,a("div",Ie,i(m.value),1),a("div",Oe,[(_(!0),k(x,null,L(o.value,e=>(_(),k("div",{key:e.id},[a("div",{class:"cardOne nes-container is-rounded",onClick:s=>l(e.id)},[a("span",null,"no."+i(e.id),1),a("img",{src:e.sprite,alt:e.names.korean},null,8,qe),a("span",null,i(e.names.korean),1),a("div",Ae,[a("span",null,i(e.names.english),1),a("span",null,i(e.names.japanese),1)]),a("div",Re,[(_(!0),k(x,null,L(e.types,s=>(_(),k("p",{key:s,class:F(["nes-btn",s])},i(W[s]),3))),128))])],8,We)]))),128))]),S.value?(_(),k("div",Ue," 모든 포켓몬을 소환했습니다 ")):U("",!0)])],32),r(_e,{modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=e=>c.value=e),"max-width":"600px"},{default:d(()=>[r(je,{id:f.value,onClose:p},null,8,["id"])]),_:1},8,["modelValue"])]))}};export{Ge as default};
